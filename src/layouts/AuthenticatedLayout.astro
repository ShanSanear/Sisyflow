---
import Layout from "./Layout.astro";
import { NavigationBarIsland } from "../components/layout/NavigationBarIsland.tsx";
import { Toaster } from "../components/ui/sonner";

interface Props {
  title?: string;
}

const { title = "Sisyflow" } = Astro.props;

const user = Astro.locals.user;

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title={title}>
  <NavigationBarIsland client:load />

  <main class="min-h-screen bg-muted/20">
    <slot />
  </main>

  <Toaster position="top-right" richColors closeButton />
</Layout>
